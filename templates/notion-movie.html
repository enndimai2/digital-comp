  <!-- All movie data scripts and merging logic moved to the bottom -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Movie Recommender</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: "Inter", sans-serif; }
    body { display: flex; height: 100vh; background: #f9f9f9; color: #333; }
    .sidebar {
      width: 220px; background: #fff; border-right: 1px solid #eee;
      padding: 20px; display: flex; flex-direction: column; gap: 15px;
    }
    .sidebar h2 { font-size: 18px; margin-bottom: 10px; }
    .sidebar a {
      text-decoration: none; color: #555; padding: 8px 12px; border-radius: 8px;
      transition: background 0.2s;
    }
    .sidebar a:hover { background: #f0f0f0; }
    .main {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      margin-right: 340px; /* Add margin to prevent overlap with right-block */
      min-width: 0;
      box-sizing: border-box;
    }
    .search {
      width: 100%; padding: 12px 15px; margin-bottom: 20px;
      border: 1px solid #ddd; border-radius: 10px; font-size: 14px;
    }
    .grid {
      display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 20px;
    }
    .card {
      background: #fff; border-radius: 16px; padding: 15px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05); transition: transform 0.2s, box-shadow 0.2s;
    }
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.1);
    }
    .card-star {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 20px;
      color: #bbb;
      cursor: pointer;
      transition: color 0.2s;
      z-index: 2;
    }
    .card-star.fav {
      color: #e67e22;
      text-shadow: 0 2px 8px #fff8;
    }
    .card h3 { font-size: 16px; margin-bottom: 5px; }
    .card span { font-size: 13px; color: #777; }
    .tags {
      margin-top: 8px; display: flex; flex-wrap: wrap; gap: 6px;
    }
    .tag {
      background: #f0f0f0; color: #555; padding: 2px 8px; border-radius: 6px; font-size: 12px;
    }
    .rating {
      color: #e67e22; font-weight: bold; margin-left: 6px;
    }
    .card { position: relative; }
    .right-block {
      width: 320px;
      background: #fff;
      border-left: 1px solid #eee;
      padding: 20px;
      min-height: 100vh;
      box-sizing: border-box;
      position: fixed;
      right: 0;
      top: 0;
      z-index: 10;
      height: 100vh;
      overflow-y: auto;
    }
    .recommender-section {
      background: #fff; border-radius: 12px; padding: 18px 18px 10px 18px; margin-bottom: 24px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
    }
    .recommender-section label, .recommender-section select, .recommender-section button {
      font-size: 15px; margin: 6px 0;
    }
    .recommender-section select, .recommender-section button {
      padding: 6px 10px; border-radius: 6px; border: 1px solid #ddd;
    }
    .recommender-result { margin-top: 10px; font-size: 15px; color: #333; }
  </style>
</head>
<body style="min-width: 1200px; min-height: 700px; max-width: 1920px; margin: 0 auto; background: #f9f9f9;">
  <!-- Sidebar removed as per requirements -->
  <div class="main">
    <div class="recommender-section">
      <label for="genreSelect">Genre:</label>
      <select id="genreSelect">
        <option value="">--Select Genre--</option>
        <option value="Sci-Fi">Sci-Fi</option>
        <option value="Thriller">Thriller</option>
        <option value="Drama">Drama</option>
        <option value="Action">Action</option>
        <option value="Crime">Crime</option>
        <option value="Romance">Romance</option>
        <option value="Musical">Musical</option>
        <option value="Anime">Anime</option>
        <option value="Fantasy">Fantasy</option>
        <option value="TV Show">TV Show</option>
        <option value="Comedy">Comedy</option>
     
      </select>
  <button id="recommenderBtn" style="background:#e74c3c;color:#fff;">Search</button>
      <div class="recommender-result" id="recommenderResult"></div>
    </div>
    <input type="text" class="search" placeholder="üîç Search movies..." id="searchInput">
    <div class="grid" id="movieGrid">
      <!-- Movie cards injected by JS -->
    </div>
  </div>
  <div class="right-block">
    <h3>ËÆ¢ÈòÖÊï∞È´òËÆ°ÁÆóÂå∫Âùó</h3>
    <div style="color:#888;font-size:14px;">(Python ‰ª£Á†ÅÂµåÂÖ•Âå∫ÔºåÁ≠âÂæÖÂêéÁª≠ÂÆûÁé∞)</div>
    <div id="python-block-placeholder"></div>
  </div>
  <script src="../movies-english-scifi-thriller.js"></script>
  <script src="../Korean Movies (Drama + Thriller + Horror).js"></script>
  <script src="../Japanese movies.js"></script>
  <script src="../French and Spanish art and thriller movies.js"></script>
  <script src="../Chinese movies.js"></script>
  <script src="../Malaysian Malay movies.js"></script>
  <script src="../Malaysian Chinese movies.js"></script>
  <script>
    // Load movies from all included JS files
    let movies = [];
    if (typeof defineMovies === 'function') movies = defineMovies();
    if (typeof defineMoviesKorean === 'function') movies = movies.concat(defineMoviesKorean());
    if (typeof defineMoviesJapanese === 'function') movies = movies.concat(defineMoviesJapanese());
    if (typeof defineMoviesFrenchSpanish === 'function') movies = movies.concat(defineMoviesFrenchSpanish());
    if (typeof defineMoviesChinese === 'function') movies = movies.concat(defineMoviesChinese());
    if (typeof defineMoviesMalay === 'function') movies = movies.concat(defineMoviesMalay());
    if (typeof defineMoviesMalaysianChinese === 'function') movies = movies.concat(defineMoviesMalaysianChinese());

    // On page load, show 20 random movies in preview
    function getRandomMovies(arr, n) {
      const shuffled = arr.slice().sort(() => 0.5 - Math.random());
      return shuffled.slice(0, n);
    }
    let currentList = getRandomMovies(movies, 20);
    const grid = document.getElementById("movieGrid");
    const searchInput = document.getElementById("searchInput");
    function renderMovies(list) {
      // Always sort A-Z by title
      const sorted = list.slice().sort((a, b) => a.title.localeCompare(b.title));
      grid.innerHTML = "";
      function getLanguageColor(language) {
        switch ((language || '').toLowerCase()) {
          case 'english': return '#4ecdc4';
          case 'japanese': return '#f7b731';
          case 'korean': return '#eb3b5a';
          case 'spanish': return '#8854d0';
          case 'french': return '#20bf6b';
          case 'hindi': return '#fa8231';
          case 'arabic': return '#3867d6';
          case 'malay': return '#fed330';
          case 'chinese': return '#fd9644';
          default: return '#b2bec3';
        }
      }
      sorted.forEach(m => {
        const card = document.createElement("div");
        const langColor = getLanguageColor(m.language);
        card.className = "card";
        card.style.border = `3px solid ${langColor}`;
        card.style.boxShadow = `0 2px 12px ${langColor}33`;
        const tags = m.tags || m.genre || [];
        card.innerHTML = `
          <div style="display:flex;align-items:center;justify-content:space-between;">
            <h3>${m.title}</h3>
          </div>
          <span>${m.year}</span>
          <div class="tags">${tags.map(tag => `<span class='tag'>${tag}</span>`).join('')}</div>
          <div style="margin-top:8px;">
            ${m.imdb ? `<a href='${m.imdb}' target='_blank' onclick='event.stopPropagation()' style='color:#4ecdc4;text-decoration:underline;font-size:13px;'>IMDb</a>` : ''}
          </div>
        `;
        card.onclick = function() {
          showMovieDetail(m);
        };
        grid.appendChild(card);
      });
    }

    // ËØ¶ÊÉÖÂºπÁ™ó/Âå∫Âùó
    function showMovieDetail(movie) {
      let modal = document.getElementById('movie-detail-modal');
      if (!modal) {
        modal = document.createElement('div');
        modal.id = 'movie-detail-modal';
        modal.style = 'position:fixed;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.45);z-index:1000;display:flex;align-items:center;justify-content:center;';
        document.body.appendChild(modal);
      }
      // Use tags or genre for display, fallback if missing
      const tags = movie.tags || movie.genre || [];
      const langColor = getLanguageColor(movie.language);
      modal.innerHTML = `<div style='background:#fff;color:#222;border-radius:16px;max-width:520px;width:90vw;padding:32px 28px;box-shadow:0 8px 32px #0005;position:relative;border:3px solid ${langColor};'>
        <button onclick='document.getElementById("movie-detail-modal").remove()' style='position:absolute;top:12px;right:18px;font-size:22px;background:none;border:none;cursor:pointer;'>&times;</button>
        <h2 style='margin-bottom:8px;'>${movie.title}</h2>
        <div style='margin-bottom:8px;'>
          <span style='font-size:15px;color:#888;'>${movie.year}${movie.rating ? ` <span class="rating">‚≠ê${movie.rating}</span>` : ''}</span>
        </div>
        <div style='margin-bottom:8px;'>
          <span style='display:inline-block;width:18px;height:18px;border-radius:50%;background:${langColor};margin-right:8px;border:2px solid #fff;vertical-align:middle;'></span>
          <span style='font-size:14px;color:#555;'>${movie.language || ''}</span>
        </div>
        <div style='margin-bottom:8px;'>${tags.map(tag => `<span class='tag' style='margin-right:6px;'>${tag}</span>`).join('')}</div>
        <div style='font-size:14px;color:#444;margin-bottom:8px;'><b>Plot Summary:</b> ${movie.summary || "<span style=\"color:#bbb\">N/A</span>"}</div>
        <div style='font-size:14px;color:#444;margin-bottom:8px;'><b>Casting:</b> ${movie.casting || "<span style=\"color:#bbb\">N/A</span>"}</div>
        <div style='font-size:14px;color:#444;margin-bottom:8px;'><b>Description:</b> ${movie.description || "<span style=\"color:#bbb\">N/A</span>"}</div>
  <div style='margin-bottom:8px;'><a href='${movie.imdb}' target='_blank' style='color:#4ecdc4;text-decoration:underline;' onclick='event.stopPropagation()'>IMDb</a></div>
        <div style='margin-top:12px;'>
          ${movie.youtube ? `<iframe width='420' height='236' src='${movie.youtube}' frameborder='0' allowfullscreen style='border-radius:10px;width:100%;max-width:420px;'></iframe>` : ''}
        </div>
      </div>`;
      modal.onclick = function(e) { if (e.target === modal) modal.remove(); };
    }
    function doSearch() {
      const q = searchInput.value.toLowerCase();
      // Search by title, tags (genre), and language
      let filtered = movies.filter(m =>
        (m.title && m.title.toLowerCase().includes(q)) ||
        ((m.tags || m.genre) && (m.tags || m.genre).some(tag => tag.toLowerCase().includes(q))) ||
        (m.language && m.language.toLowerCase().includes(q))
      );
      currentList = filtered;
      renderMovies(currentList);
    }
    searchInput.addEventListener("input", doSearch);
    searchInput.addEventListener("keydown", e => { if (e.key === 'Enter') doSearch(); });

    // Êé®ËçêÂô®ÂäüËÉΩ
    document.getElementById('recommenderBtn').onclick = function() {
      const genre = document.getElementById('genreSelect').value;
      let filtered = movies;
      if (genre) filtered = filtered.filter(m => (m.tags || m.genre || []).includes(genre));
      if (filtered.length === 0) {
        document.getElementById('recommenderResult').innerText = 'No results.';
        currentList = [];
        renderMovies(currentList);
        return;
      }
      // Show all movies matching the genre
      currentList = filtered;
      renderMovies(currentList);
      document.getElementById('recommenderResult').innerText = '';
      searchInput.value = '';
    };
    // Sidebar navigation removed
  renderMovies(currentList);
  </script>
</body>
</html>
